<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î UP BUS</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Sarabun', sans-serif;
    font-size: 13px;
    line-height: 1.7;
    color: #1a1a2e;
    background: #fff;
    padding: 30px 40px;
    max-width: 900px;
    margin: 0 auto;
  }

  h1 {
    font-size: 22px;
    font-weight: 700;
    color: #6c3483;
    border-bottom: 3px solid #6c3483;
    padding-bottom: 8px;
    margin: 25px 0 15px 0;
    page-break-after: avoid;
  }

  h2 {
    font-size: 17px;
    font-weight: 700;
    color: #2c3e50;
    border-bottom: 2px solid #d5d8dc;
    padding-bottom: 5px;
    margin: 22px 0 10px 0;
    page-break-after: avoid;
  }

  h3 {
    font-size: 14px;
    font-weight: 600;
    color: #7d3c98;
    margin: 15px 0 8px 0;
    page-break-after: avoid;
  }

  h4 {
    font-size: 13px;
    font-weight: 600;
    color: #2980b9;
    margin: 10px 0 5px 0;
  }

  p {
    margin: 6px 0;
    text-align: justify;
  }

  strong {
    color: #2c3e50;
  }

  ul, ol {
    margin: 5px 0 5px 20px;
  }

  li {
    margin: 3px 0;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin: 10px 0;
    font-size: 12px;
    page-break-inside: avoid;
  }

  th {
    background: #6c3483;
    color: white;
    font-weight: 600;
    padding: 6px 10px;
    text-align: left;
    border: 1px solid #5b2c6f;
  }

  td {
    padding: 5px 10px;
    border: 1px solid #d5d8dc;
    vertical-align: top;
  }

  tr:nth-child(even) {
    background: #f8f4fc;
  }

  tr:hover {
    background: #eee4f5;
  }

  code {
    font-family: 'Fira Code', monospace;
    font-size: 11.5px;
    background: #f0ecf5;
    padding: 1px 5px;
    border-radius: 3px;
    color: #6c3483;
  }

  pre {
    background: #2d2d3f;
    color: #e0e0e0;
    padding: 12px 15px;
    border-radius: 6px;
    overflow-x: auto;
    margin: 8px 0;
    font-size: 11px;
    line-height: 1.5;
    page-break-inside: avoid;
  }

  pre code {
    background: none;
    color: #e0e0e0;
    padding: 0;
  }

  hr {
    border: none;
    border-top: 1px solid #d5d8dc;
    margin: 18px 0;
  }

  blockquote {
    border-left: 3px solid #7d3c98;
    background: #f8f4fc;
    padding: 8px 15px;
    margin: 8px 0;
    font-size: 12px;
    color: #555;
    border-radius: 0 5px 5px 0;
  }

  /* Print styles */
  @media print {
    body {
      padding: 15px 20px;
      font-size: 11px;
    }
    h1 { font-size: 18px; margin: 15px 0 10px 0; }
    h2 { font-size: 14px; margin: 15px 0 8px 0; }
    h3 { font-size: 12px; }
    table { font-size: 10px; }
    pre { font-size: 9.5px; padding: 8px 10px; }
    code { font-size: 10px; }
    blockquote { font-size: 10.5px; }

    h1, h2, h3 { page-break-after: avoid; }
    table, pre, blockquote { page-break-inside: avoid; }
    tr { page-break-inside: avoid; }
  }

  /* Page header for print */
  @page {
    margin: 1.5cm;
    @top-center {
      content: "UP BUS ‚Äî ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î";
      font-size: 9px;
      color: #999;
    }
  }
</style>
</head>
<body>
<h1 id="up-bus">üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå UP BUS</h1>
<p>‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå <strong>Flutter</strong> ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏≠‡∏õ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏£‡∏ñ‡∏ö‡∏±‡∏™ "UP BUS" ‡πÉ‡∏ä‡πâ <strong>Firebase</strong> (Firestore, Realtime Database, Auth) ‡πÄ‡∏õ‡πá‡∏ô Backend</p>
<h2 id="_1">‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå</h2>
<div class="codehilite"><pre><span></span><code>lib/
‚îú‚îÄ‚îÄ main.dart                    (68 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ
‚îú‚îÄ‚îÄ login_page.dart              (273 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
‚îú‚îÄ‚îÄ upbus-page.dart              (1,373 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà Live
‚îú‚îÄ‚îÄ busstop-page.dart            (819 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ
‚îú‚îÄ‚îÄ busstop_map_page.dart        (269 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ
‚îú‚îÄ‚îÄ route-page.dart              (253 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
‚îú‚îÄ‚îÄ plan-page.dart               (1,512 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á
‚îú‚îÄ‚îÄ feedback-page.dart           (356 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤ Feedback
‚îú‚îÄ‚îÄ sidemenu.dart                (186 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á
‚îú‚îÄ‚îÄ change_route_page.dart       (624 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢
‚îú‚îÄ‚îÄ manager_page.dart            (1,007 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
‚îú‚îÄ‚îÄ firebase_options.dart        (99 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏Ñ‡πà‡∏≤ Firebase config
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ bus_model.dart           (111 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - Model ‡∏£‡∏ñ‡∏ö‡∏±‡∏™ + ‡∏™‡∏≤‡∏¢‡∏£‡∏ñ
‚îÇ   ‚îî‚îÄ‚îÄ bus_route_data.dart      (297 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡πâ‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ global_location_service.dart  (426 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° GPS + ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
‚îÇ   ‚îú‚îÄ‚îÄ notification_service.dart     (118 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - Push Notification
‚îÇ   ‚îú‚îÄ‚îÄ route_planner_service.dart    (641 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
‚îÇ   ‚îî‚îÄ‚îÄ route_service.dart            (71 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - OpenRouteService API
‚îî‚îÄ‚îÄ widgets/
    ‚îî‚îÄ‚îÄ global_debug_bar.dart    (15 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) - Debug Wrapper (‡∏õ‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß)
</code></pre></div>

<hr />
<h2 id="1-maindart-68">1. <code>main.dart</code> (68 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏õ ‚Äî ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Firebase, Provider, ‡πÅ‡∏•‡∏∞ Routes</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì21</td>
<td><strong>Imports</strong></td>
<td>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Flutter, Firebase, Provider, ‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ</td>
</tr>
<tr>
<td>22‚Äì37</td>
<td><code>main()</code></td>
<td>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏Å ‚Äî <code>WidgetsFlutterBinding.ensureInitialized()</code> ‚Üí <code>Firebase.initializeApp()</code> ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á <code>GlobalLocationService</code> ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ <code>ChangeNotifierProvider</code> ‚Üí <code>runApp(MyApp())</code></td>
</tr>
<tr>
<td>39‚Äì67</td>
<td><code>MyApp</code> (StatelessWidget)</td>
<td>‡∏Å‡∏≥‡∏´‡∏ô‡∏î <code>MaterialApp</code> ‡∏û‡∏£‡πâ‡∏≠‡∏° Theme ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á, ‡∏õ‡∏¥‡∏î debug banner</td>
</tr>
<tr>
<td>43‚Äì66</td>
<td><code>MyApp.build()</code></td>
<td>‡∏Å‡∏≥‡∏´‡∏ô‡∏î <strong>Named Routes</strong> ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <code>/</code> ‚Üí <code>UpBusHomePage</code>, <code>/busStop</code> ‚Üí <code>BusStopPage</code>, <code>/route</code> ‚Üí <code>RoutePage</code>, <code>/plan</code> ‚Üí <code>PlanPage</code>, <code>/feedback</code> ‚Üí <code>FeedbackPage</code>, <code>/login</code> ‚Üí <code>LoginPage</code>, <code>/busStopMap</code> ‚Üí <code>BusStopMapPage</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="2-login_pagedart-273">2. <code>login_page.dart</code> (273 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô Firebase Auth ‚Äî ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó Driver ‡πÅ‡∏•‡∏∞ Manager</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì4</td>
<td><strong>Imports</strong></td>
<td><code>firebase_auth</code>, <code>change_route_page</code>, <code>manager_page</code></td>
</tr>
<tr>
<td>6‚Äì9</td>
<td><code>LoginPage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ login</td>
</tr>
<tr>
<td>11‚Äì272</td>
<td><code>_LoginPageState</code></td>
<td>State ‡∏´‡∏•‡∏±‡∏Å ‚Äî ‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ <code>_emailController</code>, <code>_passwordController</code>, <code>_isLoading</code>, <code>_errorMessage</code></td>
</tr>
<tr>
<td>23‚Äì70</td>
<td><code>_handleLogin()</code></td>
<td>‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ <code>FirebaseAuth.instance.signInWithEmailAndPassword()</code> ‚Äî ‡∏ñ‡πâ‡∏≤ email ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ Manager ‚Üí ‡πÑ‡∏õ <code>ManagerPage</code>, ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô Driver ‚Üí ‡πÑ‡∏õ <code>ChangeRoutePage</code>, ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‚Üí <code>pop()</code> ‡∏Å‡∏•‡∏±‡∏ö</td>
</tr>
<tr>
<td>73‚Äì271</td>
<td><code>build()</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á UI ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‚Üí ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á Gradient, ‡∏ä‡πà‡∏≠‡∏á Email/Password, ‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö", ‡πÅ‡∏™‡∏î‡∏á error message</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="3-upbus-pagedart-1373">3. <code>upbus-page.dart</code> (1,373 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î) ‚≠ê ‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏•‡∏±‡∏Å</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà LIVE MAP ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ‡πÅ‡∏ö‡∏ö Real-time, ‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ, ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á, ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì20</td>
<td><strong>Imports</strong></td>
<td><code>flutter_map</code>, <code>latlong2</code>, <code>cloud_firestore</code>, <code>firebase_database</code>, <code>geolocator</code>, <code>provider</code>, <code>notification_service</code>, <code>global_location_service</code>, <code>sidemenu</code>, <code>flutter_map_animations</code></td>
</tr>
<tr>
<td>21</td>
<td><code>selectedBusStopId</code></td>
<td>‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ Global ‡πÄ‡∏Å‡πá‡∏ö ID ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</td>
</tr>
<tr>
<td>22‚Äì27</td>
<td><code>UpBusHomePage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</td>
</tr>
<tr>
<td>29‚Äì1372</td>
<td><code>_UpBusHomePageState</code></td>
<td>State ‡∏´‡∏•‡∏±‡∏Å ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: <code>_mapController</code>, <code>_routePolylines</code>, <code>_busMarkers</code>, <code>_busStopMarkers</code>, <code>_activeFilters</code>, <code>_isNotificationsEnabled</code> ‡∏Ø‡∏•‡∏Ø</td>
</tr>
<tr>
<td>48‚Äì59</td>
<td><code>_getBusColor(String)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ ("Green"/"Red"/"Blue") ‚Üí <code>Color</code> object</td>
</tr>
<tr>
<td>62‚Äì73</td>
<td><code>_getBusIconAsset(String)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ ‚Üí path ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏£‡∏ñ</td>
</tr>
<tr>
<td>75‚Äì86</td>
<td><code>_getRouteNameTh(String)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏¢‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠")</td>
</tr>
<tr>
<td>89‚Äì93</td>
<td><code>initState()</code></td>
<td>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_loadAllRoutes()</code> ‡πÅ‡∏•‡∏∞ <code>_initializeServices()</code></td>
</tr>
<tr>
<td>100‚Äì127</td>
<td><code>_loadAllRoutes()</code></td>
<td>‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å GeoJSON (3 ‡∏™‡∏≤‡∏¢: Green, Red, Blue) + ‡∏î‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡∏à‡∏≤‡∏Å Firestore + ‡πÄ‡∏£‡∏¥‡πà‡∏° listener ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ‡∏à‡∏≤‡∏Å Realtime Database</td>
</tr>
<tr>
<td>129‚Äì144</td>
<td><code>_parseGeoJson(String, Color)</code></td>
<td>‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå GeoJSON ‡∏à‡∏≤‡∏Å assets ‚Üí ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô <code>Polyline</code></td>
</tr>
<tr>
<td>146‚Äì170</td>
<td><code>_filterRoutes(int)</code></td>
<td>‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Äî index 0=‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏¢, 1=Green, 2=Red, 3=Blue, toggle ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>172‚Äì176</td>
<td><code>_initializeServices()</code></td>
<td>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>GlobalLocationService.initialize()</code> + <code>NotificationService.initialize()</code></td>
</tr>
<tr>
<td>179‚Äì181</td>
<td><code>dispose()</code></td>
<td>‡∏õ‡∏¥‡∏î map controller</td>
</tr>
<tr>
<td>186‚Äì781</td>
<td><code>build()</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á UI ‡∏´‡∏•‡∏±‡∏Å ‚Üí <strong>Stack</strong>: <code>FlutterMap</code> (‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà), ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏¢ (Green/Red/Blue), Floating Action Buttons (‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢/‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô), Proximity Alert Box, TopBar, BottomBar, SideMenu</td>
</tr>
<tr>
<td>785‚Äì807</td>
<td><code>_routeButton(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏¢‡∏£‡∏ñ (‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ)</td>
</tr>
<tr>
<td>809‚Äì841</td>
<td><code>_buildTopBar(context)</code></td>
<td>AppBar ‡∏ö‡∏ô‡∏™‡∏∏‡∏î ‚Äî ‡πÇ‡∏•‡πÇ‡∏Å‡πâ "LIVE MAP", ‡∏õ‡∏∏‡πà‡∏° Hamburger Menu</td>
</tr>
<tr>
<td>843‚Äì865</td>
<td><code>_floatingMapIcon(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Floating Icon ‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (GPS, Notification, Destination)</td>
</tr>
<tr>
<td>867‚Äì945</td>
<td><code>_showDestinationSelectionDialog()</code></td>
<td>Dialog ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á ‚Äî ‡∏î‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å Firestore ‚Üí <code>AlertDialog</code> ‡∏û‡∏£‡πâ‡∏≠‡∏° <code>ListView</code></td>
</tr>
<tr>
<td>947‚Äì952</td>
<td><code>_goToMyLocation()</code></td>
<td>‡∏Ç‡∏≠‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‚Üí ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</td>
</tr>
<tr>
<td>954‚Äì956</td>
<td><code>_onNotificationIconTap()</code></td>
<td>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î <code>_showRouteSelectionDialog()</code></td>
</tr>
<tr>
<td>958‚Äì1057</td>
<td><code>_showRouteSelectionDialog()</code></td>
<td>Dialog ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‚Äî ‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏¢/‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏µ + ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô + ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢</td>
</tr>
<tr>
<td>1059‚Äì1086</td>
<td><code>_routeSelectionTile(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á ListTile ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</td>
</tr>
<tr>
<td>1088‚Äì1096</td>
<td><code>_showNotificationSnackBar(String)</code></td>
<td>‡πÅ‡∏™‡∏î‡∏á SnackBar ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</td>
</tr>
<tr>
<td>1098‚Äì1297</td>
<td><code>_buildProximityAlertBox(service)</code></td>
<td>‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏ñ‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏ñ, ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á, ETA countdown, animation ‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö, ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î</td>
</tr>
<tr>
<td>1299‚Äì1323</td>
<td><code>_buildBottomBar()</code></td>
<td>Navigation Bar ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‚Äî 5 ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (Map, BusStop, Route, Plan, Feedback)</td>
</tr>
<tr>
<td>1325‚Äì1371</td>
<td><code>_bottomNavItem(index, icon, label)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÉ‡∏ô Bottom Navigation</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="4-busstop-pagedart-819">4. <code>busstop-page.dart</code> (819 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ñ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏≠‡∏î‡∏≠‡∏¢‡∏π‡πà</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì5</td>
<td><strong>Imports</strong> + <code>enum BusLine</code></td>
<td>‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ Firestore, ‡∏Å‡∏≥‡∏´‡∏ô‡∏î enum <code>BusLine { yellow, red, blue }</code></td>
</tr>
<tr>
<td>7‚Äì12</td>
<td><code>BusStopPage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ</td>
</tr>
<tr>
<td>14‚Äì818</td>
<td><code>_BusStopPageState</code></td>
<td>State ‡∏´‡∏•‡∏±‡∏Å ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: <code>_selectedLine</code>, <code>_busStopDocs</code>, <code>_activeBusStops</code>, <code>_realtimeSubscription</code></td>
</tr>
<tr>
<td>51‚Äì55</td>
<td><code>dispose()</code></td>
<td>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å Realtime Database subscription</td>
</tr>
<tr>
<td>58‚Äì83</td>
<td><code>didChangeDependencies()</code></td>
<td>‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡∏à‡∏≤‡∏Å Firestore + ‡∏ü‡∏±‡∏á Realtime Database ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</td>
</tr>
<tr>
<td>85‚Äì106</td>
<td><code>_handleRouteIdSwitch(routeData)</code></td>
<td>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏´‡∏ô ‚Äî ‡∏´‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å‡∏û‡∏¥‡∏Å‡∏±‡∏î GPS</td>
</tr>
<tr>
<td>108‚Äì110</td>
<td><code>_onSelectLine(BusLine)</code></td>
<td>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å (<code>setState</code>)</td>
</tr>
<tr>
<td>113‚Äì473</td>
<td><code>build()</code></td>
<td>UI ‡∏´‡∏•‡∏±‡∏Å ‚Üí TopBar, ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢ (‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ 3 ‡∏™‡∏µ), <code>StreamBuilder</code> ‡∏ü‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Firestore/RTDB ‚Üí ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ</td>
</tr>
<tr>
<td>477‚Äì509</td>
<td><code>_buildTopBar(context)</code></td>
<td>AppBar "‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ" + ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ</td>
</tr>
<tr>
<td>511‚Äì553</td>
<td><code>_lineCircle(c, label, sel, tap)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢ + animation ‡πÄ‡∏°‡∏∑‡πà‡∏≠ selected</td>
</tr>
<tr>
<td>555‚Äì683</td>
<td><code>_buildBusStopCard(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Card ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡πâ‡∏≤‡∏¢ ‚Äî ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≤‡∏¢, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡∏°‡∏µ‡∏£‡∏ñ‡∏à‡∏≠‡∏î/‡πÑ‡∏°‡πà‡∏°‡∏µ), Route Chips, ‡∏õ‡∏∏‡πà‡∏°‡∏î‡∏π‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</td>
</tr>
<tr>
<td>686‚Äì712</td>
<td><code>_buildBottomBar()</code></td>
<td>Bottom Navigation Bar</td>
</tr>
<tr>
<td>714‚Äì761</td>
<td><code>_bottomNavItem(...)</code></td>
<td>‡πÅ‡∏ï‡πà‡∏•‡∏∞ Item ‡πÉ‡∏ô Bottom Nav</td>
</tr>
<tr>
<td>764‚Äì817</td>
<td><code>_buildRouteChips(routesData)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Chip ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ô‡∏µ‡πâ (‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡∏≤‡∏¢ Green", "‡∏™‡∏≤‡∏¢ Red")</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="5-busstop_map_pagedart-269">5. <code>busstop_map_page.dart</code> (269 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Äî ‡πÄ‡∏õ‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ BusStop</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì4</td>
<td><strong>Imports</strong></td>
<td><code>flutter_map</code>, <code>latlong2</code>, <code>cloud_firestore</code></td>
</tr>
<tr>
<td>6‚Äì11</td>
<td><code>BusStopMapPage</code> (StatefulWidget)</td>
<td>Widget ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ</td>
</tr>
<tr>
<td>13‚Äì268</td>
<td><code>_BusStopMapPageState</code></td>
<td>State ‡∏´‡∏•‡∏±‡∏Å ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: <code>_busStopMarkers</code>, <code>_isLoading</code></td>
</tr>
<tr>
<td>21‚Äì27</td>
<td><code>initState()</code></td>
<td>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_fetchBusStops()</code></td>
</tr>
<tr>
<td>29‚Äì53</td>
<td><code>_fetchBusStops()</code></td>
<td>‡∏î‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å Firestore ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á <code>Marker</code> ‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á</td>
</tr>
<tr>
<td>56‚Äì76</td>
<td><code>didChangeDependencies()</code></td>
<td>‡∏ñ‡πâ‡∏≤‡∏°‡∏µ <code>selectedStopId</code> ‡∏à‡∏≤‡∏Å arguments ‚Üí ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</td>
</tr>
<tr>
<td>80‚Äì130</td>
<td><code>_buildRouteChips(routesData)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Chip ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ô‡∏±‡πâ‡∏ô</td>
</tr>
<tr>
<td>133‚Äì267</td>
<td><code>build()</code></td>
<td>UI ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‚Üí <code>FlutterMap</code> ‡∏û‡∏£‡πâ‡∏≠‡∏° <code>TileLayer</code> (OpenStreetMap) + <code>MarkerLayer</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="6-route-pagedart-253">6. <code>route-page.dart</code> (253 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á 3 ‡∏™‡∏≤‡∏¢</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì2</td>
<td><strong>Imports</strong></td>
<td><code>flutter/material</code>, <code>sidemenu</code></td>
</tr>
<tr>
<td>4‚Äì9</td>
<td><code>RoutePage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á</td>
</tr>
<tr>
<td>11‚Äì252</td>
<td><code>_RoutePageState</code></td>
<td>State ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: <code>_selectedRouteIndex</code>, <code>_routeNames</code>, <code>_routeColors</code>, <code>_routeImages</code></td>
</tr>
<tr>
<td>34‚Äì116</td>
<td><code>build()</code></td>
<td>UI ‚Üí TopBar, ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á 3 ‡∏™‡∏≤‡∏¢, ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á + SideMenu</td>
</tr>
<tr>
<td>119‚Äì138</td>
<td><code>_routeFilterButton(label, color, index)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á</td>
</tr>
<tr>
<td>142‚Äì174</td>
<td><code>_buildTopBar(context)</code></td>
<td>AppBar "‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á"</td>
</tr>
<tr>
<td>176‚Äì200</td>
<td><code>_buildBottomBar()</code></td>
<td>Bottom Navigation</td>
</tr>
<tr>
<td>202‚Äì251</td>
<td><code>_bottomNavItem(...)</code></td>
<td>‡πÅ‡∏ï‡πà‡∏•‡∏∞ Item</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="7-plan-pagedart-1512">7. <code>plan-page.dart</code> (1,512 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‚Äî ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á‚Üí‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á, ‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì10</td>
<td><strong>Imports</strong></td>
<td><code>cloud_firestore</code>, <code>flutter_map</code>, <code>latlong2</code>, <code>route_planner_service</code></td>
</tr>
<tr>
<td>12‚Äì17</td>
<td><code>PlanPage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô</td>
</tr>
<tr>
<td>19‚Äì1511</td>
<td><code>_PlanPageState</code></td>
<td>State ‡∏´‡∏•‡∏±‡∏Å ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏¢‡∏≠‡∏∞: <code>_mapController</code>, <code>_fromStopId</code>/<code>_toStopId</code>, <code>_routeResults</code>, <code>_routePolylines</code>, <code>_routeMarkers</code>, <code>_allBusStops</code>, <code>_detailedRoutes</code></td>
</tr>
<tr>
<td>51‚Äì54</td>
<td><code>initState()</code></td>
<td>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_loadRouteGeoJson()</code> ‡πÅ‡∏•‡∏∞ <code>_loadDetailedRoutePlan()</code></td>
</tr>
<tr>
<td>56‚Äì80</td>
<td><code>_loadRouteGeoJson()</code></td>
<td>‡πÇ‡∏´‡∏•‡∏î GeoJSON 3 ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Üí ‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏∏‡∏Å‡∏à‡∏∏‡∏î ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö draw polyline</td>
</tr>
<tr>
<td>82‚Äì118</td>
<td><code>_loadDetailedRoutePlan()</code></td>
<td>‡∏î‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡∏à‡∏≤‡∏Å Firestore ‚Üí ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö internal stop ID ‡∏ú‡πà‡∏≤‡∏ô <code>RoutePlannerService.mapFirebaseIdToStopId()</code></td>
</tr>
<tr>
<td>120‚Äì136</td>
<td><code>_parseGeoJsonToPoints(assetPath)</code></td>
<td>‡∏≠‡πà‡∏≤‡∏ô GeoJSON ‚Üí List ‡∏Ç‡∏≠‡∏á <code>LatLng</code></td>
</tr>
<tr>
<td>139‚Äì158</td>
<td><code>_findMatchingSegmentPoints(from, to)</code></td>
<td>‡∏´‡∏≤‡∏à‡∏∏‡∏î GeoJSON ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á-‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</td>
</tr>
<tr>
<td>161‚Äì291</td>
<td><code>build()</code></td>
<td>UI ‚Üí TopBar, Search Input (from/to dropdown), ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤, <code>FlutterMap</code>, Route Result Cards, SideMenu</td>
</tr>
<tr>
<td>294‚Äì354</td>
<td><code>_onSearchBusRoute()</code></td>
<td>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>RoutePlannerService.findAllRoutes()</code> ‚Üí <code>_drawBusRoute()</code> + <code>_addRouteMarkers()</code></td>
</tr>
<tr>
<td>356‚Äì430</td>
<td><code>_drawBusRoute(RouteResult)</code></td>
<td>‡∏ß‡∏≤‡∏î‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‚Äî ‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà segment ‡∏Å‡∏±‡∏ö GeoJSON coordinates ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á <code>Polyline</code></td>
</tr>
<tr>
<td>432‚Äì522</td>
<td><code>_addRouteMarkers()</code></td>
<td>‡πÄ‡∏û‡∏¥‡πà‡∏° Marker ‡∏ö‡∏ô‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà ‚Äî ‡∏õ‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á, ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á, ‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>524‚Äì607</td>
<td><code>_createRouteStopMarker(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Marker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏õ‡πâ‡∏≤‡∏¢ (‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô + ‡∏ä‡∏∑‡πà‡∏≠ + ‡∏™‡∏µ)</td>
</tr>
<tr>
<td>609‚Äì632</td>
<td><code>_getStopCoords(stopId)</code></td>
<td>‡∏î‡∏∂‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏à‡∏≤‡∏Å internal data ‡∏´‡∏£‡∏∑‡∏≠ Firestore</td>
</tr>
<tr>
<td>634‚Äì674</td>
<td><code>_matchesStopId(name, stopId)</code></td>
<td>‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≤‡∏¢‡∏Å‡∏±‡∏ö ID (fuzzy matching)</td>
</tr>
<tr>
<td>676‚Äì692</td>
<td><code>_getCoordsFromFirebase(docId)</code></td>
<td>‡∏î‡∏∂‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏à‡∏≤‡∏Å Firestore document</td>
</tr>
<tr>
<td>695‚Äì765</td>
<td><code>_buildRouteResultCards()</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Card ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äî ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥/‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà 2,3...</td>
</tr>
<tr>
<td>767‚Äì989</td>
<td><code>_buildSingleRouteCard(result, isRec, idx)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Card ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢, ‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ, timeline, time note</td>
</tr>
<tr>
<td>991‚Äì1093</td>
<td><code>_buildRouteTimeline(result)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Timeline ‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á ‚Äî ‡πÅ‡∏™‡∏î‡∏á node ‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Üí ‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‚Üí ‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</td>
</tr>
<tr>
<td>1095‚Äì1170</td>
<td><code>_buildTimelineNode(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ Node ‡πÉ‡∏ô timeline (‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏µ + ‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≤‡∏¢)</td>
</tr>
<tr>
<td>1172‚Äì1220</td>
<td><code>_buildTimelineLine(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÉ‡∏ô timeline (‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏¢ + ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏¢ + ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢)</td>
</tr>
<tr>
<td>1223‚Äì1267</td>
<td><code>_buildDropdown(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Dropdown ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á/‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</td>
</tr>
<tr>
<td>1269‚Äì1300</td>
<td><code>_buildTopBar()</code></td>
<td>AppBar "‡πÅ‡∏û‡∏•‡∏ô"</td>
</tr>
<tr>
<td>1302‚Äì1374</td>
<td><code>_buildBottomBar()</code> + <code>_bottomNavItem()</code></td>
<td>Bottom Navigation</td>
</tr>
<tr>
<td>1378‚Äì1447</td>
<td><code>_buildFullSearchInput()</code></td>
<td>‡∏™‡πà‡∏ß‡∏ô UI ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á-‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏° (2 dropdown + ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ + ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö)</td>
</tr>
<tr>
<td>1449‚Äì1510</td>
<td><code>_buildCompactSearchHeader()</code></td>
<td>‡∏™‡πà‡∏ß‡∏ô UI ‡∏¢‡πà‡∏≠ ‚Äî ‡πÇ‡∏ä‡∏ß‡πå "A ‚Üí B" ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="8-feedback-pagedart-356">8. <code>feedback-page.dart</code> (356 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡∏™‡πà‡∏á Feedback ‚Äî ‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô + ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì5</td>
<td><strong>Imports</strong> + <code>enum FeedbackMode</code></td>
<td><code>{ complain, rating }</code></td>
</tr>
<tr>
<td>7‚Äì12</td>
<td><code>FeedbackPage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤ Feedback</td>
</tr>
<tr>
<td>14‚Äì355</td>
<td><code>_FeedbackPageState</code></td>
<td>State ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: <code>_mode</code>, <code>_messageController</code>, <code>_rating</code></td>
</tr>
<tr>
<td>25‚Äì28</td>
<td><code>dispose()</code></td>
<td>‡∏õ‡∏¥‡∏î <code>_messageController</code></td>
</tr>
<tr>
<td>31‚Äì185</td>
<td><code>build()</code></td>
<td>UI ‚Üí TopBar, ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö Complain/Rating, TextArea ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°, Star Rating (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô rating mode), ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á</td>
</tr>
<tr>
<td>187‚Äì230</td>
<td><code>_onSubmit()</code></td>
<td>‡∏™‡πà‡∏á Feedback ‡πÑ‡∏õ Firestore collection <code>'feedback'</code> ‚Äî ‡πÄ‡∏Å‡πá‡∏ö type, message, rating, timestamp</td>
</tr>
<tr>
<td>232‚Äì263</td>
<td><code>_buildTopBar()</code></td>
<td>AppBar "Feedback"</td>
</tr>
<tr>
<td>265‚Äì278</td>
<td><code>_modeButton(label, isSelected, onTap)</code></td>
<td>‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î Complain/Rating</td>
</tr>
<tr>
<td>281‚Äì354</td>
<td><code>_buildBottomBar()</code> + <code>_bottomNavItem()</code></td>
<td>Bottom Navigation</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="9-sidemenudart-186">9. <code>sidemenu.dart</code> (186 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á (Drawer) ‚Äî ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì6</td>
<td><strong>Imports</strong></td>
<td><code>firebase_auth</code>, <code>shared_preferences</code>, <code>change_route_page</code>, <code>manager_page</code></td>
</tr>
<tr>
<td>8‚Äì13</td>
<td><code>SideMenu</code> (StatefulWidget)</td>
<td>Widget ‡πÄ‡∏°‡∏ô‡∏π</td>
</tr>
<tr>
<td>15‚Äì185</td>
<td><code>_SideMenuState</code></td>
<td>State ‚Äî ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ <code>driverEmails</code> ‡πÅ‡∏•‡∏∞ <code>managerEmails</code></td>
</tr>
<tr>
<td>26‚Äì184</td>
<td><code>build()</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á <code>Drawer</code> ‚Üí Header (‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå + email), ‡πÄ‡∏°‡∏ô‡∏π‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó: ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‚Üí "‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£", ‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö ‚Üí "‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏£‡∏ñ", ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ login ‚Üí "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö", ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‚Üí "Logout" (‡∏•‡πâ‡∏≤‡∏á SharedPreferences + signOut)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="10-change_route_pagedart-624">10. <code>change_route_page.dart</code> (624 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ ‚Äî ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ + ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì4</td>
<td><strong>Imports</strong></td>
<td><code>firebase_database</code>, <code>shared_preferences</code></td>
</tr>
<tr>
<td>6‚Äì11</td>
<td><code>ChangeRoutePage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏£‡∏ñ</td>
</tr>
<tr>
<td>13‚Äì623</td>
<td><code>_ChangeRoutePageState</code></td>
<td>State ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: <code>_selectedRoute</code>, <code>_selectedBus</code>, <code>_driverName</code>, <code>_busStatusMap</code>, <code>_myActiveBus</code></td>
</tr>
<tr>
<td>45‚Äì52</td>
<td><code>initState()</code></td>
<td>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_checkSavedDriverName()</code> + <code>_listenToBusStatusRealtime()</code></td>
</tr>
<tr>
<td>55‚Äì69</td>
<td><code>_checkSavedDriverName()</code></td>
<td>‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏à‡∏≤‡∏Å <code>SharedPreferences</code> ‚Äî ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÅ‡∏™‡∏î‡∏á Dialog ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å</td>
</tr>
<tr>
<td>72‚Äì142</td>
<td><code>_showDriverNameDialog()</code></td>
<td>Dialog ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠ ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á SharedPreferences</td>
</tr>
<tr>
<td>144‚Äì214</td>
<td><code>_listenToBusStatusRealtime()</code></td>
<td>‡∏ü‡∏±‡∏á Realtime Database path <code>'GPS'</code> ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏ñ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏±‡∏ô (‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö)</td>
</tr>
<tr>
<td>217‚Äì286</td>
<td><code>_submitData()</code></td>
<td>‡∏à‡∏≠‡∏á‡∏£‡∏ñ ‚Üí ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• <code>driverName</code>, <code>routeColor</code> ‡πÑ‡∏õ Realtime Database path <code>GPS/{busId}</code></td>
</tr>
<tr>
<td>289‚Äì357</td>
<td><code>_releaseBus()</code></td>
<td>‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏£‡∏ñ ‚Üí ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• <code>driverName</code>, <code>routeColor</code> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å RTDB</td>
</tr>
<tr>
<td>359‚Äì365</td>
<td><code>_getRouteName(colorValue)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á color id ‚Üí ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏¢ ("Green" ‚Üí "‡∏™‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠")</td>
</tr>
<tr>
<td>367‚Äì369</td>
<td><code>_formatBusName(busId)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á "bus_1" ‚Üí "‡∏£‡∏ñ‡πÄ‡∏ö‡∏≠‡∏£‡πå 1"</td>
</tr>
<tr>
<td>372‚Äì622</td>
<td><code>build()</code></td>
<td>UI ‚Üí AppBar, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ñ‡πâ‡∏≤‡∏Ç‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà), Dropdown ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏¢, Dropdown ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏ñ (‡πÅ‡∏™‡∏î‡∏á available/‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á), ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô, ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏ñ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="11-manager_pagedart-1007">11. <code>manager_page.dart</code> (1,007 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‚Äî 2 Tab: Feedback Report + Driver Report</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì5</td>
<td><strong>Imports</strong></td>
<td><code>firebase_auth</code>, <code>cloud_firestore</code>, <code>firebase_database</code></td>
</tr>
<tr>
<td>7‚Äì12</td>
<td><code>ManagerPage</code> (StatefulWidget)</td>
<td>Widget ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</td>
</tr>
<tr>
<td>14‚Äì1006</td>
<td><code>_ManagerPageState</code></td>
<td>State ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: <code>_tabController</code>, <code>_feedbackFilter</code>, <code>_feedbackRouteFilter</code></td>
</tr>
<tr>
<td>27‚Äì30</td>
<td><code>initState()</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á <code>TabController(length: 2)</code></td>
</tr>
<tr>
<td>33‚Äì36</td>
<td><code>dispose()</code></td>
<td>‡∏õ‡∏¥‡∏î TabController</td>
</tr>
<tr>
<td>38‚Äì43</td>
<td><code>_handleLogout()</code></td>
<td>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö + ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</td>
</tr>
<tr>
<td>46‚Äì75</td>
<td><code>build()</code></td>
<td>UI ‚Üí AppBar ‡∏û‡∏£‡πâ‡∏≠‡∏° TabBar (üìù Feedback / üöå ‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö), TabBarView</td>
</tr>
<tr>
<td>77‚Äì299</td>
<td><code>_buildFeedbackTab()</code></td>
<td><strong>Tab 1</strong> ‚Äî ‡∏î‡∏∂‡∏á Feedback ‡∏à‡∏≤‡∏Å Firestore ‚Üí Filter (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î/‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô) + Filter ‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏¢ ‚Üí ‡πÅ‡∏™‡∏î‡∏á Card ‡πÅ‡∏ï‡πà‡∏•‡∏∞ feedback ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏î‡∏≤‡∏ß rating</td>
</tr>
<tr>
<td>301‚Äì628</td>
<td><code>_buildDriverTab()</code></td>
<td><strong>Tab 2</strong> ‚Äî ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ñ‡∏à‡∏≤‡∏Å Realtime Database path <code>'GPS'</code> ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ active/offline, ‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πà‡∏á, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡∏ñ</td>
</tr>
<tr>
<td>630‚Äì658</td>
<td><code>_filterChip(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á FilterChip ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏á Feedback</td>
</tr>
<tr>
<td>660‚Äì695</td>
<td><code>_routeFilterChip(...)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á FilterChip ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>697‚Äì818</td>
<td><code>_showFeedbackDetail(...)</code></td>
<td>Dialog ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î Feedback</td>
</tr>
<tr>
<td>820‚Äì988</td>
<td><code>_showDriverDetail(...)</code></td>
<td>Dialog ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö</td>
</tr>
<tr>
<td>990‚Äì1005</td>
<td><code>_infoRow(icon, label, value)</code></td>
<td>Helper ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ñ‡∏ß‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="12-modelsbus_modeldart-111">12. <code>models/bus_model.dart</code> (111 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>Model ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏ñ‡∏ö‡∏±‡∏™ + ‡∏™‡∏≤‡∏¢‡∏£‡∏ñ</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>3‚Äì63</td>
<td><code>class Bus</code></td>
<td>Model ‡∏£‡∏ñ‡∏ö‡∏±‡∏™ ‚Äî Fields: <code>id</code>, <code>position</code> (LatLng), <code>name</code>, <code>routeId</code>, <code>distanceToUser</code>, <code>driverName</code>, <code>routeColor</code></td>
</tr>
<tr>
<td>25‚Äì51</td>
<td><code>Bus.fromFirebase(id, data)</code></td>
<td>Factory ‚Äî ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Realtime DB ‚Üí <code>Bus</code> object, ‡∏°‡∏µ logic ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ nested data</td>
</tr>
<tr>
<td>52‚Äì62</td>
<td><code>Bus.copyWithDistance(dist)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á Bus ‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° distance ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÅ‡∏•‡πâ‡∏ß</td>
</tr>
<tr>
<td>66‚Äì110</td>
<td><code>class BusRoute</code></td>
<td>Model ‡∏™‡∏≤‡∏¢‡∏£‡∏ñ ‚Äî Fields: <code>id</code>, <code>name</code>, <code>shortName</code>, <code>colorValue</code></td>
</tr>
<tr>
<td>79‚Äì100</td>
<td><code>BusRoute.allRoutes</code> (static)</td>
<td>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏≤‡∏¢ 3 ‡∏™‡∏≤‡∏¢: Green (‡∏™‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠), Red (‡∏™‡∏≤‡∏¢‡∏´‡∏≠‡∏û‡∏±‡∏Å), Blue (‡∏™‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏á‡∏≤‡∏°)</td>
</tr>
<tr>
<td>101‚Äì109</td>
<td><code>BusRoute.fromId(id)</code> (static)</td>
<td>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏≤‡∏¢‡∏à‡∏≤‡∏Å ID</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="13-modelsbus_route_datadart-297">13. <code>models/bus_route_data.dart</code> (297 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡πÅ‡∏•‡∏∞‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Hard-coded)</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>2‚Äì20</td>
<td><code>class BusStopData</code></td>
<td>Model ‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ ‚Äî Fields: <code>id</code>, <code>name</code>, <code>aliases</code> (‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô)</td>
</tr>
<tr>
<td>23‚Äì78</td>
<td><code>class BusRouteData</code></td>
<td>Model ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Äî Fields: <code>id</code>, <code>name</code>, <code>color</code>, <code>colorValue</code>, <code>stops</code> (‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢), <code>startHour</code>/<code>endHour</code> (‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£)</td>
</tr>
<tr>
<td>42‚Äì55</td>
<td><code>isActiveAt(DateTime)</code></td>
<td>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡∏ß‡∏¥‡πà‡∏á‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏´‡∏°</td>
</tr>
<tr>
<td>57‚Äì60</td>
<td><code>indexOfStop(stopId)</code></td>
<td>‡∏´‡∏≤ index ‡∏Ç‡∏≠‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡πÉ‡∏ô‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>62‚Äì65</td>
<td><code>lastIndexOfStop(stopId)</code></td>
<td>‡∏´‡∏≤ index ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏õ‡πâ‡∏≤‡∏¢</td>
</tr>
<tr>
<td>67‚Äì74</td>
<td><code>allIndicesOfStop(stopId)</code></td>
<td>‡∏´‡∏≤‡∏ó‡∏∏‡∏Å index ‡∏Ç‡∏≠‡∏á‡∏õ‡πâ‡∏≤‡∏¢ (‡∏õ‡πâ‡∏≤‡∏¢‡∏≠‡∏≤‡∏à‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ö‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ß‡∏ô)</td>
</tr>
<tr>
<td>76‚Äì77</td>
<td><code>hasStop(stopId)</code></td>
<td>‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏°‡∏µ‡πÉ‡∏ô‡∏™‡∏≤‡∏¢‡πÑ‡∏´‡∏°</td>
</tr>
<tr>
<td>81‚Äì195</td>
<td><code>class BusStops</code></td>
<td>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (static <code>all</code>) ‚Äî ‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏ä‡πà‡∏ô PKY, CE, AGRI, SCI ‡∏Ø‡∏•‡∏Ø</td>
</tr>
<tr>
<td>172‚Äì179</td>
<td><code>BusStops.fromId(id)</code></td>
<td>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å ID</td>
</tr>
<tr>
<td>181‚Äì194</td>
<td><code>BusStops.fromName(name)</code></td>
<td>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ (fuzzy match, ‡∏Ñ‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞ aliases)</td>
</tr>
<tr>
<td>198‚Äì296</td>
<td><code>class BusRoutes</code></td>
<td>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á 3 ‡∏™‡∏≤‡∏¢ (static <code>all</code>) ‚Äî ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏≤‡∏¢‡∏°‡∏µ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢, ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</td>
</tr>
<tr>
<td>286‚Äì289</td>
<td><code>BusRoutes.getActiveRoutes(time)</code></td>
<td>‡∏´‡∏≤‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡πà‡∏á‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡πâ‡∏ô</td>
</tr>
<tr>
<td>291‚Äì295</td>
<td><code>BusRoutes.getRoutesWithStop(stopId)</code></td>
<td>‡∏´‡∏≤‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ô‡∏µ‡πâ</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="14-servicesglobal_location_servicedart-426">14. <code>services/global_location_service.dart</code> (426 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>Service ‡∏´‡∏•‡∏±‡∏Å ‚Äî ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° GPS ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ + ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ + ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏ñ‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>1‚Äì12</td>
<td><strong>Imports</strong></td>
<td><code>geolocator</code>, <code>latlong2</code>, <code>firebase_database</code>, <code>notification_service</code>, <code>bus_model</code></td>
</tr>
<tr>
<td>13‚Äì425</td>
<td><code>class GlobalLocationService extends ChangeNotifier</code></td>
<td>Service ‚Äî ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: <code>_userPosition</code>, <code>_isNotifyEnabled</code>, <code>_notifyRouteId</code>, <code>_destinationName</code>, <code>_closestBus</code>, <code>_alertStage</code>, <code>_busStops</code>, <code>_busList</code></td>
</tr>
<tr>
<td>55‚Äì68</td>
<td><code>initialize()</code></td>
<td>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‚Äî ‡∏Ç‡∏≠ permission GPS ‚Üí <code>_fetchBusStops()</code> ‚Üí <code>_listenToBusLocation()</code> ‚Üí <code>_startLocationTracking()</code></td>
</tr>
<tr>
<td>70‚Äì79</td>
<td><code>setNotifyEnabled(bool, routeId)</code></td>
<td>‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô + ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</td>
</tr>
<tr>
<td>81‚Äì103</td>
<td><code>setDestination(name, routeId)</code></td>
<td>‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‚Äî ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å <code>_busStops</code> + filter ‡∏™‡∏≤‡∏¢‡∏ó‡∏µ‡πà notify</td>
</tr>
<tr>
<td>118‚Äì142</td>
<td><code>_fetchBusStops()</code></td>
<td>‡∏î‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ‡∏à‡∏≤‡∏Å Firestore collection <code>'busstop'</code></td>
</tr>
<tr>
<td>144‚Äì177</td>
<td><code>_listenToBusLocation()</code></td>
<td>‡∏ü‡∏±‡∏á RTDB path <code>'GPS'</code> ‚Üí ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô <code>Bus</code> objects ‚Üí ‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_updateClosestBus()</code></td>
</tr>
<tr>
<td>179‚Äì219</td>
<td><code>_startLocationTracking()</code></td>
<td>‡πÄ‡∏£‡∏¥‡πà‡∏° <code>Geolocator.getPositionStream()</code> ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï <code>_userPosition</code> ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_updateClosestBus()</code></td>
</tr>
<tr>
<td>221‚Äì359</td>
<td><code>_updateClosestBus()</code></td>
<td><strong>Logic ‡∏´‡∏•‡∏±‡∏Å</strong> ‚Äî ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î, ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ETA, ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö alert stage (5‡∏ô‡∏≤‡∏ó‡∏µ/3‡∏ô‡∏≤‡∏ó‡∏µ/1‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>_triggerAlert()</code> ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå</td>
</tr>
<tr>
<td>361‚Äì375</td>
<td><code>_triggerAlert(bus, dist, eta, msg)</code></td>
<td>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>NotificationService.alertBusNearby()</code></td>
</tr>
<tr>
<td>377‚Äì397</td>
<td><code>getClosestStopInfo()</code></td>
<td>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡∏ä‡∏∑‡πà‡∏≠ + ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á)</td>
</tr>
<tr>
<td>399‚Äì417</td>
<td><code>findClosestStop()</code></td>
<td>‡∏Ñ‡∏∑‡∏ô Map ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</td>
</tr>
<tr>
<td>419‚Äì424</td>
<td><code>dispose()</code></td>
<td>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å subscription ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="15-servicesnotification_servicedart-118">15. <code>services/notification_service.dart</code> (118 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Push Notification + ‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>5‚Äì117</td>
<td><code>class NotificationService</code></td>
<td>Static class ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</td>
</tr>
<tr>
<td>11‚Äì31</td>
<td><code>initialize()</code></td>
<td>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ <code>FlutterLocalNotificationsPlugin</code> (Android + iOS)</td>
</tr>
<tr>
<td>33‚Äì41</td>
<td><code>calculateEtaSeconds(dist, speed)</code></td>
<td>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ETA ‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á √∑ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 35 km/h)</td>
</tr>
<tr>
<td>43‚Äì54</td>
<td><code>formatEta(etaSeconds)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á seconds ‚Üí "X ‡∏ô‡∏≤‡∏ó‡∏µ Y ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ" ‡∏´‡∏£‡∏∑‡∏≠ "‡∏ñ‡∏∂‡∏á‡πÅ‡∏•‡πâ‡∏ß"</td>
</tr>
<tr>
<td>56‚Äì92</td>
<td><code>showBusNearbyNotification(...)</code></td>
<td>‡πÅ‡∏™‡∏î‡∏á Push Notification ‚Äî channel "Bus Proximity Alerts"</td>
</tr>
<tr>
<td>94‚Äì100</td>
<td><code>vibrate()</code></td>
<td>‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</td>
</tr>
<tr>
<td>102‚Äì116</td>
<td><code>alertBusNearby(...)</code></td>
<td>‡∏£‡∏ß‡∏° notification + vibrate ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô (<code>Future.wait</code>)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="16-servicesroute_planner_servicedart-641">16. <code>services/route_planner_service.dart</code> (641 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‚Äî ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Direct + Transfer (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢)</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>5‚Äì27</td>
<td><code>class RouteResult</code></td>
<td>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Äî Fields: <code>segments</code>, <code>totalStops</code>, <code>isTransfer</code>, <code>message</code>, <code>timeNote</code>, <code>isDirect</code></td>
</tr>
<tr>
<td>30‚Äì47</td>
<td><code>class RouteSegment</code></td>
<td>‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Äî Fields: <code>routeId</code>, <code>routeName</code>, <code>fromStop</code>, <code>toStop</code>, <code>stopCount</code>, <code>color</code>, <code>intermediateStops</code></td>
</tr>
<tr>
<td>50‚Äì640</td>
<td><code>class RoutePlannerService</code></td>
<td>Service ‡∏´‡∏•‡∏±‡∏Å</td>
</tr>
<tr>
<td>51‚Äì66</td>
<td><code>findRoute(from, to, time)</code></td>
<td>‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>findAllRoutes()</code> ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å</td>
</tr>
<tr>
<td>68‚Äì179</td>
<td><code>findAllRoutes(from, to, time)</code></td>
<td>‡∏´‡∏≤‡∏ó‡∏∏‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‚Üí <code>_findAllDirectRoutes()</code> + <code>_findAllTransferRoutes()</code> ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° score ‚Üí ‡∏Å‡∏≥‡∏à‡∏±‡∏î duplicate</td>
</tr>
<tr>
<td>181‚Äì198</td>
<td><code>_calculateWeightedScore(result)</code></td>
<td>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢ + penalty ‡∏ß‡∏ô‡∏£‡∏ñ + penalty ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>200‚Äì221</td>
<td><code>_getTimeNoteForRoute(route, result)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏ß‡∏•‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô "‡∏™‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡∏ß‡∏¥‡πà‡∏á 6:00-18:00")</td>
</tr>
<tr>
<td>223‚Äì254</td>
<td><code>_getTimeNoteForTransfer(result)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>256‚Äì263</td>
<td><code>_isCircular(route)</code></td>
<td>‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô circular route (‡∏õ‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏Å = ‡∏õ‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢)</td>
</tr>
<tr>
<td>265‚Äì278</td>
<td><code>_calculateStopCount(from, to, total, isCirc)</code></td>
<td>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 index</td>
</tr>
<tr>
<td>280‚Äì301</td>
<td><code>_getStopsInBetween(route, from, to, isCirc)</code></td>
<td>‡∏î‡∏∂‡∏á list ‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á</td>
</tr>
<tr>
<td>303‚Äì320</td>
<td><code>_generateMessageFromSegments(segments)</code></td>
<td>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ ("‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏≤‡∏¢ X ‡∏ó‡∏µ‡πà A ‚Üí ‡∏•‡∏á‡∏ó‡∏µ‡πà B")</td>
</tr>
<tr>
<td>322‚Äì367</td>
<td><code>_splitIfPassingTerminal(segments)</code></td>
<td>‡πÅ‡∏ö‡πà‡∏á segment ‡∏ñ‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô PKY (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏ñ)</td>
</tr>
<tr>
<td>369‚Äì421</td>
<td><code>_findAllDirectRoutes(from, to, routes)</code></td>
<td>‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ï‡∏£‡∏á ‚Äî ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏∏‡∏Å‡∏™‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á from ‡πÅ‡∏•‡∏∞ to ‡πÑ‡∏´‡∏°, ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö circular route</td>
</tr>
<tr>
<td>423‚Äì571</td>
<td><code>_findAllTransferRoutes(from, to, routes)</code></td>
<td>‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢ ‚Äî ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô + ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì stopCount ‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ä‡πà‡∏ß‡∏á</td>
</tr>
<tr>
<td>573‚Äì581</td>
<td><code>_findTransferPoints(route1, route2)</code></td>
<td>‡∏´‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ó‡∏±‡πâ‡∏á 2 ‡∏™‡∏≤‡∏¢</td>
</tr>
<tr>
<td>583‚Äì639</td>
<td><code>mapFirebaseIdToStopId(fbId, name)</code></td>
<td>‡πÅ‡∏õ‡∏•‡∏á Firebase Document ID ‚Üí internal stop ID</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="17-servicesroute_servicedart-71">17. <code>services/route_service.dart</code> (71 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å OpenRouteService API ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ñ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>6‚Äì63</td>
<td><code>class RouteService</code></td>
<td>Static class ‚Äî API Key + Base URL</td>
</tr>
<tr>
<td>16‚Äì57</td>
<td><code>getRoadDistance(from, to)</code></td>
<td>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‚Äî ‡πÄ‡∏ä‡πá‡∏Ñ cache ‡∏Å‡πà‡∏≠‡∏ô ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‚Üí cache ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå (30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</td>
</tr>
<tr>
<td>59‚Äì62</td>
<td><code>clearCache()</code></td>
<td>‡∏•‡πâ‡∏≤‡∏á cache</td>
</tr>
<tr>
<td>65‚Äì70</td>
<td><code>class _CachedDistance</code></td>
<td>‡πÄ‡∏Å‡πá‡∏ö distance + timestamp</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="18-widgetsglobal_debug_bardart-15">18. <code>widgets/global_debug_bar.dart</code> (15 ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î)</h2>
<p>Wrapper Widget (‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)</p>
<table>
<thead>
<tr>
<th>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
<th>‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô/‡∏Ñ‡∏•‡∏≤‡∏™</th>
<th>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</th>
</tr>
</thead>
<tbody>
<tr>
<td>4‚Äì14</td>
<td><code>GlobalDebugBarWrapper</code> (StatelessWidget)</td>
<td>‡∏£‡∏±‡∏ö <code>child</code> ‚Üí return <code>child</code> ‡∏ï‡∏£‡∏á‡πÜ (‡πÑ‡∏°‡πà‡∏°‡∏µ debug bar ‡πÅ‡∏•‡πâ‡∏ß)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="dependencies-pubspecyaml">Dependencies ‡∏´‡∏•‡∏±‡∏Å (‡∏à‡∏≤‡∏Å <code>pubspec.yaml</code>)</h2>
<table>
<thead>
<tr>
<th>Package</th>
<th>‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô</th>
<th>‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>firebase_core</code></td>
<td>^4.4.0</td>
<td>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Firebase</td>
</tr>
<tr>
<td><code>cloud_firestore</code></td>
<td>^6.1.0</td>
<td>‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Firestore (‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ, Feedback)</td>
</tr>
<tr>
<td><code>firebase_database</code></td>
<td>^12.1.1</td>
<td>Realtime Database (‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á GPS ‡∏£‡∏ñ)</td>
</tr>
<tr>
<td><code>firebase_auth</code></td>
<td>^6.1.4</td>
<td>‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô (Email/Password)</td>
</tr>
<tr>
<td><code>flutter_map</code></td>
<td>^8.2.2</td>
<td>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà (OpenStreetMap)</td>
</tr>
<tr>
<td><code>latlong2</code></td>
<td>^0.9.1</td>
<td>‡∏Ñ‡∏•‡∏≤‡∏™‡∏û‡∏¥‡∏Å‡∏±‡∏î LatLng</td>
</tr>
<tr>
<td><code>geolocator</code></td>
<td>^14.0.2</td>
<td>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° GPS ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</td>
</tr>
<tr>
<td><code>flutter_local_notifications</code></td>
<td>^18.0.1</td>
<td>Push Notification</td>
</tr>
<tr>
<td><code>vibration</code></td>
<td>^2.0.1</td>
<td>‡∏™‡∏±‡πà‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</td>
</tr>
<tr>
<td><code>provider</code></td>
<td>^6.1.5+1</td>
<td>State Management</td>
</tr>
<tr>
<td><code>shared_preferences</code></td>
<td>^2.2.2</td>
<td>‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• local</td>
</tr>
<tr>
<td><code>http</code></td>
<td>^1.2.0</td>
<td>‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API</td>
</tr>
<tr>
<td><code>flutter_map_animations</code></td>
<td>0.9.0</td>
<td>Animation ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_2">üìê ‡∏™‡∏π‡∏ï‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏†‡∏≤‡∏©‡∏≤‡∏Ñ‡∏ô)</h2>
<h3 id="1-eta">1. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ñ‡∏∂‡∏á‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (ETA)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/notification_service.dart#L35-L41">notification_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>35‚Äì41</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>calculateEtaSeconds</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ "‡∏£‡∏ñ‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏≠‡∏µ‡∏Å‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ" ‡∏Å‡πá‡πÄ‡∏≠‡∏≤ <strong>‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á ‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</strong> ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏π‡∏ï‡∏£‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏°.‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡∏¢ ‡∏Ñ‡∏∑‡∏≠ <strong>‡πÄ‡∏ß‡∏•‡∏≤ = ‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á √∑ ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß</strong></p>
<ul>
<li>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏£‡∏ñ‡∏ö‡∏±‡∏™‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ <strong>35 ‡∏Å‡∏°./‡∏ä‡∏°.</strong></li>
<li>‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏≤‡πÄ‡∏õ‡πá‡∏ô<strong>‡πÄ‡∏°‡∏ï‡∏£</strong> ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏õ‡∏•‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏õ‡πá‡∏ô <strong>‡πÄ‡∏°‡∏ï‡∏£/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</strong> ‡∏Å‡πà‡∏≠‡∏ô</li>
<li>‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏õ‡∏•‡∏á (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>39</strong>): ‡πÄ‡∏≠‡∏≤ 35 ‡∏Ñ‡∏π‡∏ì 1000 (‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ï‡∏£) ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ 3600 (‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ) = ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì <strong>9.72 ‡∏°./‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</strong></li>
<li>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ETA (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>40</strong>): ‡πÄ‡∏≠‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏±‡∏î‡πÄ‡∏®‡∏©</li>
</ul>
<p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong> ‡∏ñ‡πâ‡∏≤‡∏£‡∏ñ‡∏≠‡∏¢‡∏π‡πà‡∏´‡πà‡∏≤‡∏á 500 ‡πÄ‡∏°‡∏ï‡∏£ ‚Üí 500 √∑ 9.72 = ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì <strong>51 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</strong> ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏ñ‡∏à‡∏∞‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡πÉ‡∏ô 51 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö</p>
<hr />
<h3 id="2-2">2. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á (2 ‡∏ß‡∏¥‡∏ò‡∏µ)</h3>
<h4 id="1-haversine">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 1: Haversine ‚Äî ‡∏´‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á "‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á" ‡∏ö‡∏ô‡πÇ‡∏•‡∏Å‡∏Å‡∏•‡∏°</h4>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/global_location_service.dart#L225-L237">global_location_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>225</strong> (‡∏™‡∏£‡πâ‡∏≤‡∏á Distance object) ‡πÅ‡∏•‡∏∞ <strong>233‚Äì235</strong> (‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏£‡∏¥‡∏á)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ library <code>latlong2</code> ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏•‡∏≤‡∏™ <code>Distance()</code> ‡∏ä‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡πâ ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á‡∏°‡∏±‡∏ô‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ <strong>Haversine</strong> ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏à‡∏∏‡∏î‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß‡πÇ‡∏•‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö</p>
<ul>
<li>‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ <strong>‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î-‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î</strong> ‡∏Ç‡∏≠‡∏á 2 ‡∏à‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡∏Å‡∏±‡∏ö ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏£‡∏ñ)</li>
<li>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡πÅ‡∏ö‡∏ö "‡∏•‡∏≤‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á" ‡∏ú‡πà‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡πÇ‡∏•‡∏Å‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡πâ‡∏á</li>
<li>‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏õ‡πá‡∏ô <strong>‡πÄ‡∏°‡∏ï‡∏£</strong></li>
<li><strong>‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î:</strong> ‡∏°‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞ "‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á" ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏£‡∏∞‡∏¢‡∏∞‡∏ï‡∏≤‡∏°‡∏ñ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á</li>
</ul>
<h4 id="2-api">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á "‡∏ï‡∏≤‡∏°‡∏ñ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á"</h4>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/route_service.dart#L18-L57">route_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>18‚Äì57</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>getRoadDistance</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÄ‡∏£‡∏≤‡∏™‡πà‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î 2 ‡∏à‡∏∏‡∏î‡πÑ‡∏õ‡πÉ‡∏´‡πâ <strong>OpenRouteService API</strong> ‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á "‡∏ï‡∏≤‡∏°‡∏ñ‡∏ô‡∏ô‡∏à‡∏£‡∏¥‡∏á" ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ï‡∏£ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô Google Maps ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡πâ</p>
<blockquote>
<p>üìç Fallback ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>229‚Äì235</strong> ‡πÉ‡∏ô <code>global_location_service.dart</code></p>
</blockquote>
<p><strong>Fallback (‡πÅ‡∏ú‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á):</strong> ‡∏ñ‡πâ‡∏≤ API ‡∏•‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≠‡∏ö‡∏ä‡πâ‡∏≤ (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>233‚Äì235</strong>) ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÉ‡∏ä‡πâ Haversine (‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á) ‡πÅ‡∏ó‡∏ô‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏õ‡∏Ñ‡πâ‡∏≤‡∏á</p>
<hr />
<h3 id="3-4-alert-stage">3. ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö 4 ‡∏Ç‡∏±‡πâ‡∏ô (Alert Stage)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/global_location_service.dart#L321-L359">global_location_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>321‚Äì359</strong> (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <code>_updateClosestBus</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡∏û‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ETA ‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏à‡∏≤‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Ç‡πâ‡∏≠ 1) ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ß‡πà‡∏≤ "‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÑ‡∏´‡∏ô" ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡πá‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö <strong>‡∏Ç‡∏±‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡πÑ‡∏î</strong> ‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:</p>
<table>
<thead>
<tr>
<th>‡∏Ç‡∏±‡πâ‡∏ô</th>
<th>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</th>
<th>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤</th>
<th>üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>ETA ‚â§ 5 ‡∏ô‡∏≤‡∏ó‡∏µ (300 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</td>
<td>"‡∏≠‡∏µ‡∏Å 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏à‡∏∞‡∏ñ‡∏∂‡∏á"</td>
<td><strong>353‚Äì358</strong></td>
</tr>
<tr>
<td>2</td>
<td>ETA ‚â§ 3 ‡∏ô‡∏≤‡∏ó‡∏µ (180 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</td>
<td>"‡∏≠‡∏µ‡∏Å 3 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏à‡∏∞‡∏ñ‡∏∂‡∏á"</td>
<td><strong>346‚Äì351</strong></td>
</tr>
<tr>
<td>3</td>
<td>ETA ‚â§ 1 ‡∏ô‡∏≤‡∏ó‡∏µ (60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</td>
<td>"‡∏≠‡∏µ‡∏Å 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏à‡∏∞‡∏ñ‡∏∂‡∏á"</td>
<td><strong>339‚Äì344</strong></td>
</tr>
<tr>
<td>4</td>
<td>‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á ‚â§ 250 ‡πÄ‡∏°‡∏ï‡∏£</td>
<td>"‡∏£‡∏ñ‡πÉ‡∏Å‡∏•‡πâ‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡πÅ‡∏•‡πâ‡∏ß!"</td>
<td><strong>327‚Äì337</strong></td>
</tr>
</tbody>
</table>
<p><strong>‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 325):</strong> ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏à‡∏∞ <strong>‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡πà‡∏≠‡∏Ñ‡∏±‡∏ô</strong> ‡∏Ñ‡∏£‡∏±‡∏ö ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô‡∏°‡∏±‡∏ô‡∏à‡∏∞ spam ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ <code>_lastAlertStage</code> ‡∏à‡∏≥‡πÑ‡∏ß‡πâ‡∏ß‡πà‡∏≤‡∏Ñ‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏à‡πâ‡∏á‡∏ñ‡∏∂‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡πÑ‡∏´‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏ñ‡πâ‡∏≤‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏±‡πâ‡∏ô 2 ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏à‡πâ‡∏á‡∏ã‡πâ‡∏≥ ‡∏à‡∏∞‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏±‡πâ‡∏ô 3 ‡πÄ‡∏•‡∏¢</p>
<hr />
<h3 id="4-direction-detection">4. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡πÄ‡∏£‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏µ (Direction Detection)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/global_location_service.dart#L263-L307">global_location_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>263‚Äì307</strong> (‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô <code>_updateClosestBus</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏ñ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏±‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏±‡∏ô‡∏à‡∏∞ <strong>‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏£‡∏ñ‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏£‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏¥‡πà‡∏á‡∏≠‡∏≠‡∏Å</strong> ‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏Ñ‡∏∑‡∏≠:</p>
<ul>
<li>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>270‚Äì274</strong>: ‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏à‡∏≤‡∏Å <strong>‡∏£‡∏ñ‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢</strong> (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤)</li>
<li>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>276‚Äì277</strong>: ‡∏î‡∏∂‡∏á <strong>‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô</strong> ‡∏°‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</li>
<li>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>280</strong>: ‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏¢‡∏∞ <strong>‡∏•‡∏î‡∏•‡∏á</strong> ‡∏´‡∏£‡∏∑‡∏≠ <strong>‡πÄ‡∏ó‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°</strong> ‚Üí ‡∏£‡∏ñ‡∏Å‡∏≥‡∏•‡∏±‡∏á <strong>‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤</strong> ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‚úÖ</li>
<li>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>287</strong>: ‡∏ñ‡πâ‡∏≤‡∏£‡∏∞‡∏¢‡∏∞ <strong>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô</strong> ‚Üí ‡∏£‡∏ñ <strong>‡∏ß‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏µ</strong> ‡∏à‡∏∏‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‚ùå ‚Üí ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ</li>
<li>‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>306</strong>: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏ö‡∏´‡∏ô‡πâ‡∏≤</li>
</ul>
<p>‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏£‡∏≤‡∏î‡∏π‡∏ß‡πà‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏î‡∏¥‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ ‡∏Å‡πá‡∏î‡∏π‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡πÉ‡∏Å‡∏•‡πâ‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏Å‡∏•‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö</p>
<hr />
<h3 id="5-weighted-score">5. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (Weighted Score)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/route_planner_service.dart#L182-L198">route_planner_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>182‚Äì198</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>_calculateWeightedScore</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÄ‡∏™‡πâ‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡πâ‡∏ô‡πÑ‡∏´‡∏ô? ‡∏Å‡πá‡πÉ‡∏ä‡πâ <strong>‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</strong> ‡∏Ñ‡∏£‡∏±‡∏ö ‡∏¢‡∏¥‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <strong>‡∏ô‡πâ‡∏≠‡∏¢</strong> ‡∏¢‡∏¥‡πà‡∏á <strong>‡∏î‡∏µ</strong></p>
<p>‡∏™‡∏π‡∏ï‡∏£: <strong>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô = ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á + ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö</strong></p>
<p>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏°‡∏µ 2 ‡∏ï‡∏±‡∏ß:
- <strong>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏ô‡∏£‡∏ñ</strong> (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>186‚Äì188</strong>): ‡∏ñ‡πâ‡∏≤‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡∏ß‡∏ô‡∏£‡∏≠‡∏ö ‚Üí ‡πÇ‡∏î‡∏ô <strong>+20</strong> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏•‡∏¢ (‡∏´‡∏ô‡∏±‡∏Å‡∏°‡∏≤‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤)
- <strong>‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡πà‡∏≠‡∏£‡∏ñ</strong> (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>192‚Äì194</strong>): ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢ ‚Üí ‡πÇ‡∏î‡∏ô <strong>+5</strong> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏û‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏£‡∏ñ‡πÉ‡∏´‡∏°‡πà)
- <strong>‡∏£‡∏ß‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</strong> (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>196‚Äì197</strong>): ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î + penalty = ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°</p>
<p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong>
- <strong>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á A:</strong> ‡∏ô‡∏±‡πà‡∏á S1 ‡∏ï‡∏£‡∏á‡πÑ‡∏õ 8 ‡∏õ‡πâ‡∏≤‡∏¢ ‚Üí ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô = 8 + 0 + 0 = <strong>8</strong> ‚úÖ ‡∏î‡∏µ‡∏™‡∏∏‡∏î
- <strong>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á B:</strong> ‡∏ô‡∏±‡πà‡∏á S1 ‡∏ï‡πà‡∏≠ S2 ‡∏£‡∏ß‡∏° 5 ‡∏õ‡πâ‡∏≤‡∏¢ ‡πÅ‡∏ï‡πà‡∏ï‡πà‡∏≠‡∏£‡∏ñ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‚Üí ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô = 5 + 0 + 5 = <strong>10</strong>
- <strong>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á C:</strong> ‡∏ô‡∏±‡πà‡∏á S1 ‡∏ß‡∏ô‡∏•‡∏π‡∏õ 6 ‡∏õ‡πâ‡∏≤‡∏¢ ‚Üí ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô = 6 + 20 + 0 = <strong>26</strong> ‚ùå ‡πÅ‡∏¢‡πà‡∏™‡∏∏‡∏î</p>
<p>‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÑ‡∏õ‡∏°‡∏≤‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ <strong>‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á A</strong> ‡∏Å‡πà‡∏≠‡∏ô</p>
<hr />
<h3 id="6-linear-vs-circular">6. ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏≤‡∏á (Linear vs Circular)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/route_planner_service.dart#L266-L278">route_planner_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>266‚Äì278</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>_calculateStopCount</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏±‡∏ö‡∏ß‡πà‡∏≤ "‡∏à‡∏≤‡∏Å‡∏õ‡πâ‡∏≤‡∏¢ A ‡∏ñ‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢ B ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏µ‡πà‡∏õ‡πâ‡∏≤‡∏¢" ‡∏°‡∏µ 2 ‡∏Å‡∏£‡∏ì‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö:</p>
<p><strong>‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 1 ‚Äî ‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 272‚Äì273):</strong> ‡∏ñ‡πâ‡∏≤‡∏õ‡πâ‡∏≤‡∏¢ A ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô B ‡πÉ‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö ‡∏Å‡πá‡πÅ‡∏Ñ‡πà <strong>‡πÄ‡∏≠‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á B ‡∏•‡∏ö A</strong>
- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: A ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà 2, B ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà 5 ‚Üí 5 - 2 = <strong>3 ‡∏õ‡πâ‡∏≤‡∏¢</strong></p>
<p><strong>‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà 2 ‚Äî ‡∏ß‡∏ô‡∏•‡∏π‡∏õ (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 274‚Äì276):</strong> ‡∏ñ‡πâ‡∏≤ A ‡∏≠‡∏¢‡∏π‡πà <strong>‡∏´‡∏•‡∏±‡∏á</strong> B ‡πÉ‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö ‡πÅ‡∏ï‡πà‡∏™‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏° ‡∏Å‡πá‡∏ï‡πâ‡∏≠‡∏á "‡∏ô‡∏±‡πà‡∏á‡∏ß‡∏ô‡∏Ç‡πâ‡∏≤‡∏°‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô"
- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏±‡∏ö: ‡∏ô‡∏±‡∏ö‡∏à‡∏≤‡∏Å A ‡πÑ‡∏õ‡∏à‡∏ô‡∏™‡∏∏‡∏î‡∏™‡∏≤‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏ß‡∏Å‡∏à‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏°‡∏≤‡∏ñ‡∏∂‡∏á B
- ‡∏™‡∏π‡∏ï‡∏£: <strong>(‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î - 1 - ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á A) + ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á B</strong>
- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏™‡∏≤‡∏¢ S2 ‡∏°‡∏µ 13 ‡∏õ‡πâ‡∏≤‡∏¢, A ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 10, B ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 3 ‚Üí (12 - 10) + 3 = <strong>5 ‡∏õ‡πâ‡∏≤‡∏¢</strong></p>
<hr />
<h3 id="7-circular-route">7. ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°‡πÑ‡∏´‡∏° (Circular Route)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/route_planner_service.dart#L260-L263">route_planner_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>260‚Äì263</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>_isCircular</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡∏î‡∏π‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>262</strong> ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ <strong>‡∏õ‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏Å‡∏Å‡∏±‡∏ö‡∏õ‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡πâ‡∏≤‡∏¢‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°</strong> ‚Üí ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πà‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°
- <strong>S2:</strong> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà PKY ‚Üí ‡∏ß‡∏ô‡πÑ‡∏õ ‚Üí ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ PKY ‚Üí ‚úÖ ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°
- <strong>S1-AM:</strong> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠ ‚Üí ‡∏ß‡∏ô‡πÑ‡∏õ ‚Üí ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠ ‚Üí ‚úÖ ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏á‡∏Å‡∏•‡∏°</p>
<hr />
<h3 id="8-cache-api">8. ‡∏£‡∏∞‡∏ö‡∏ö Cache (‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏ß‡πâ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ã‡πâ‡∏≥)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/route_service.dart#L12-L28">route_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>13</strong> (‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® cache map), <strong>14</strong> (‡∏Å‡∏≥‡∏´‡∏ô‡∏î TTL 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ), <strong>23‚Äì28</strong> (‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ cache ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏≠‡∏≤‡∏¢‡∏∏‡πÑ‡∏´‡∏°)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏à‡∏≤‡∏Å API ‡∏à‡∏∞ <strong>‡∏à‡∏≥‡∏ú‡∏•‡πÑ‡∏ß‡πâ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</strong> ‡∏Ñ‡∏£‡∏±‡∏ö (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>14</strong>) ‡∏ñ‡πâ‡∏≤‡∏ñ‡∏≤‡∏°‡∏ã‡πâ‡∏≥‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏ï‡∏≠‡∏ö‡πÄ‡∏•‡∏¢ (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>26</strong>) ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÉ‡∏´‡∏°‡πà ‡∏ä‡πà‡∏ß‡∏¢ <strong>‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô API call</strong> ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏õ <strong>‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô</strong></p>
<p>‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏ä‡πá‡∏Ñ (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>25</strong>): ‡πÄ‡∏≠‡∏≤ <strong>‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô ‡∏•‡∏ö ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà cache ‡πÑ‡∏ß‡πâ</strong> ‡∏ñ‡πâ‡∏≤‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‚Üí ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ ‚Üí ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÉ‡∏´‡∏°‡πà</p>
<hr />
<h3 id="9-operating-hours">9. ‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏£‡∏ñ (Operating Hours)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/models/bus_route_data.dart#L43-L55">bus_route_data.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>43‚Äì55</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>isActiveAt</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏≤‡∏¢‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ "‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏™‡∏≤‡∏¢‡∏ô‡∏µ‡πâ‡∏ß‡∏¥‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏°"</p>
<ul>
<li><strong>‡∏Å‡∏£‡∏ì‡∏µ‡∏õ‡∏Å‡∏ï‡∏¥</strong> (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>47‚Äì48</strong>): ‡πÄ‡∏ä‡πà‡∏ô S1-AM 05:00‚Äì14:00 ‡∏î‡∏π‡∏á‡πà‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á <strong>‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 5 ‡∏ñ‡∏∂‡∏á 14</strong></li>
<li><strong>‡∏Å‡∏£‡∏ì‡∏µ‡∏Ç‡πâ‡∏≤‡∏°‡∏ß‡∏±‡∏ô</strong> (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>49‚Äì51</strong>): ‡πÄ‡∏ä‡πà‡∏ô S1-PM 14:00‚Äì00:00 ‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡∏ï‡πà‡∏≤‡∏á‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á ‡∏Ñ‡∏∑‡∏≠‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á <strong>‚â• 14 ‡∏´‡∏£‡∏∑‡∏≠ &lt; 0</strong> (‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏Ñ‡∏∑‡∏ô)</li>
<li><strong>‡∏Å‡∏£‡∏ì‡∏µ‡∏ß‡∏¥‡πà‡∏á‡∏ï‡∏•‡∏≠‡∏î</strong> (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>44</strong>): ‡∏ñ‡πâ‡∏≤ startHour ‡∏Å‡∏±‡∏ö endHour ‡πÄ‡∏õ‡πá‡∏ô null ‚Üí return true ‡πÄ‡∏•‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô S2, S3)</li>
</ul>
<table>
<thead>
<tr>
<th>‡∏™‡∏≤‡∏¢</th>
<th>‡πÄ‡∏£‡∏¥‡πà‡∏°</th>
<th>‡∏à‡∏ö</th>
<th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
</tr>
</thead>
<tbody>
<tr>
<td>S1-AM</td>
<td>05:00</td>
<td>14:00</td>
<td>‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô PKY</td>
</tr>
<tr>
<td>S1-PM</td>
<td>14:00</td>
<td>00:00</td>
<td>‡∏ú‡πà‡∏≤‡∏ô PKY (‡∏Ç‡πâ‡∏≤‡∏°‡∏ß‡∏±‡∏ô)</td>
</tr>
<tr>
<td>S2</td>
<td>‚Äî</td>
<td>‚Äî</td>
<td>‡∏ß‡∏¥‡πà‡∏á‡∏ï‡∏•‡∏≠‡∏î‡∏ß‡∏±‡∏ô</td>
</tr>
<tr>
<td>S3</td>
<td>‚Äî</td>
<td>‚Äî</td>
<td>‡∏ß‡∏¥‡πà‡∏á‡∏ï‡∏•‡∏≠‡∏î‡∏ß‡∏±‡∏ô</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="10-set-intersection">10. ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢ (Set Intersection)</h3>
<blockquote>
<p>üìÅ ‡πÑ‡∏ü‡∏•‡πå: <a href="file:///z:/daft_ani-main/lib/services/route_planner_service.dart#L574-L581">route_planner_service.dart</a>
üìç ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà <strong>574‚Äì581</strong> (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô <code>_findTransferPoints</code>)</p>
</blockquote>
<p><strong>‡∏û‡∏π‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÜ:</strong> ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏∞‡∏ï‡πà‡∏≠‡∏£‡∏ñ ‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏ß‡πà‡∏≤ "‡∏õ‡πâ‡∏≤‡∏¢‡πÑ‡∏´‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á 2 ‡∏™‡∏≤‡∏¢" ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏≠:
- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>578</strong>: ‡πÄ‡∏≠‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏¢ 1 ‡∏°‡∏≤‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô Set
- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>579</strong>: ‡πÄ‡∏≠‡∏≤‡∏õ‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏¢ 2 ‡∏°‡∏≤‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô Set
- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î <strong>580</strong>: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code>.intersection()</code> ‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà <strong>‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô</strong> ‚Äî ‡∏ó‡∏≤‡∏á‡∏Ñ‡∏ì‡∏¥‡∏ï‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ <strong>‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ã‡∏Å‡∏ä‡∏±‡∏ô</strong> ‡∏Ç‡∏≠‡∏á 2 ‡πÄ‡∏ã‡∏ï‡∏Ñ‡∏£‡∏±‡∏ö</p>
<p><strong>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</strong>
- ‡∏™‡∏≤‡∏¢ S1-AM ‡∏ú‡πà‡∏≤‡∏ô: ‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏≠, ‡∏ß‡∏¥‡∏®‡∏ß‡∏∞, ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°, ‡∏≠‡∏ò‡∏¥‡∏Å‡∏≤‡∏£, ‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡πå
- ‡∏™‡∏≤‡∏¢ S2 ‡∏ú‡πà‡∏≤‡∏ô: PKY, UB99, ‡πÄ‡∏ß‡∏µ‡∏¢‡∏á, ‡∏™‡∏á‡∏ß‡∏ô, ‡∏™‡∏≤‡∏ò‡∏¥‡∏ï, ‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡πå, ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°, ‡∏≠‡∏ò‡∏¥‡∏Å‡∏≤‡∏£
- <strong>‡∏õ‡πâ‡∏≤‡∏¢‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô</strong> = {‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°, ‡∏≠‡∏ò‡∏¥‡∏Å‡∏≤‡∏£, ‡∏®‡∏¥‡∏•‡∏õ‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå, ‡∏Ñ‡∏ì‡∏∞‡∏ß‡∏¥‡∏ó‡∏¢‡πå} ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏≤‡∏¢‡πÑ‡∏î‡πâ <strong>4 ‡∏à‡∏∏‡∏î</strong></p>
<hr />
<h2 id="flow">‡∏™‡∏£‡∏∏‡∏õ Flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</h2>
<div class="codehilite"><pre><span></span><code><span class="nf">graph</span><span class="w"> </span><span class="n">TD</span>
<span class="w">    </span><span class="n">A</span><span class="p">[</span><span class="s">&quot;main.dart&lt;br/&gt;Firebase.initializeApp()&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">B</span><span class="p">[</span><span class="s">&quot;GlobalLocationService&lt;br/&gt;(Provider)&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">A</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">C</span><span class="p">[</span><span class="s">&quot;MyApp ‚Üí Routes&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">D</span><span class="p">[</span><span class="s">&quot;UpBusHomePage&lt;br/&gt;‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà Live&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">E</span><span class="p">[</span><span class="s">&quot;BusStopPage&lt;br/&gt;‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≤‡∏¢‡∏£‡∏ñ&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">F</span><span class="p">[</span><span class="s">&quot;RoutePage&lt;br/&gt;‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">G</span><span class="p">[</span><span class="s">&quot;PlanPage&lt;br/&gt;‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">H</span><span class="p">[</span><span class="s">&quot;FeedbackPage&lt;br/&gt;‡∏™‡πà‡∏á Feedback&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">C</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">I</span><span class="p">[</span><span class="s">&quot;LoginPage&lt;br/&gt;‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô&quot;</span><span class="p">]</span>

<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏î‡∏∂‡∏á GPS ‡∏£‡∏ñ&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">J</span><span class="p">[</span><span class="s">&quot;Realtime Database&lt;br/&gt;path: GPS/&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏î‡∏∂‡∏á‡∏õ‡πâ‡∏≤‡∏¢&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">K</span><span class="p">[</span><span class="s">&quot;Firestore&lt;br/&gt;collection: busstop&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;GeoJSON&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">L</span><span class="p">[</span><span class="s">&quot;assets/data/&quot;</span><span class="p">]</span>

<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">M</span><span class="p">[</span><span class="s">&quot;Geolocator&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">B</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">N</span><span class="p">[</span><span class="s">&quot;NotificationService&quot;</span><span class="p">]</span>

<span class="w">    </span><span class="n">G</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">O</span><span class="p">[</span><span class="s">&quot;RoutePlannerService&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">O</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡πâ‡∏≤‡∏¢&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">P</span><span class="p">[</span><span class="s">&quot;bus_route_data.dart&quot;</span><span class="p">]</span>

<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;Driver&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">Q</span><span class="p">[</span><span class="s">&quot;ChangeRoutePage&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">I</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;Manager&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">R</span><span class="p">[</span><span class="s">&quot;ManagerPage&quot;</span><span class="p">]</span>

<span class="w">    </span><span class="n">Q</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏à‡∏≠‡∏á‡∏£‡∏ñ/‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏£‡∏ñ&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">J</span>
<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏î‡∏π Report&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">K</span>
<span class="w">    </span><span class="n">R</span><span class="w"> </span><span class="o">--&gt;|</span><span class="s">&quot;‡∏î‡∏π‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö&quot;</span><span class="o">|</span><span class="w"> </span><span class="n">J</span>
</code></pre></div>
<footer style="margin-top:30px; padding-top:10px; border-top:2px solid #6c3483; text-align:center; color:#999; font-size:11px;">
  üìã ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå UP BUS ‚Äî ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏™‡∏≠‡∏ö
</footer>
</body>
</html>